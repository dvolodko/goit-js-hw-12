{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/izi-toast-handler.js","../src/js/loader-handler.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '32552782-0d4c86680018457e820f20492';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst config = {\n  params: {\n    key: KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  },\n};\n\nexport async function fetchImages(query, page) {\n  config.params.q = query;\n  config.params.page = page;\n\n  const response = await axios.get('', config);\n\n  return response.data;\n}\n","const gallery = document.querySelector('.gallery');\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <div class=\"gallery-image-stats\">\n            <ul class=\"gallery-image-stats-list\">\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Likes</p>\n                <p class=\"gallery-image-stats-text\">${likes}</p>\n              </li>\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Views</p>\n                <p class=\"gallery-image-stats-text\">${views}</p>\n              </li>\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Comments</p>\n                <p class=\"gallery-image-stats-text\">${comments}</p>\n              </li>\n              <li class=\"gallery-image-stats-item\">\n                <p class=\"gallery-image-stats-title\">Downloads</p>\n                <p class=\"gallery-image-stats-text\">${downloads}</p>\n              </li>\n            </ul>\n          </div>\n        </a>\n      </li>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction emptyQuery() {\n  iziToast.error({\n    title: 'Oops!',\n    message:\n      'Sorry, you have to type something in the search field. Please try again!',\n    position: 'topRight',\n  });\n}\n\nfunction noImagesFound() {\n  iziToast.error({\n    title: 'Oops!',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n\nfunction imagesFound(totalHits) {\n  iziToast.success({\n    title: 'Hooray!',\n    message: `We have found ${totalHits} images for you!`,\n    position: 'topRight',\n  });\n}\n\nfunction lastPage() {\n  iziToast.info({\n    title: 'Oops!',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n\nfunction error(error) {\n  iziToast.error({\n    title: 'Oops!',\n    message: `Sorry, there is some error: ${error}`,\n    position: 'topRight',\n  });\n}\n\nexport { emptyQuery, noImagesFound, imagesFound, lastPage, error };\n","const loaderElement = document.querySelector('.loader-element');\n\nfunction on() {\n  loaderElement.insertAdjacentHTML('beforeend', '<span class=\"loader\"></span>');\n}\n\nfunction off() {\n  loaderElement.innerHTML = '';\n}\n\nexport { on, off };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport * as iziToast from './js/izi-toast-handler';\nimport * as loader from './js/loader-handler';\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', submitHandler);\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nloadMoreBtn.addEventListener('click', loadMoreHandler);\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nlet query = '';\nlet page = 1;\n\nasync function submitHandler(e) {\n  e.preventDefault();\n  resetGallery();\n  query = e.target.elements.searchField.value.toLowerCase().trim();\n\n  if (!query) {\n    iziToast.emptyQuery();\n    return;\n  }\n\n  loader.on();\n\n  try {\n    const images = await fetchImages(query, page);\n    if (images.hits.length === 0) {\n      iziToast.noImagesFound();\n      loader.off();\n    } else {\n      iziToast.imagesFound(images.totalHits);\n      imagesHandler(images);\n    }\n  } catch (error) {\n    iziToast.error(error);\n    loader.off();\n  }\n\n  form.reset();\n}\n\nasync function loadMoreHandler() {\n  loader.on();\n\n  try {\n    const images = await fetchImages(query, page);\n    imagesHandler(images);\n    scrollByTwoItems();\n  } catch (error) {\n    iziToast.error(error);\n    loader.off();\n  }\n}\n\nasync function imagesHandler(images) {\n  loader.off();\n  renderImages(images.hits);\n  lightBox.refresh();\n  const totalPages = Math.ceil(images.totalHits / 15);\n  page += 1;\n  if (page > totalPages) {\n    iziToast.lastPage();\n    loadMoreBtn.classList.add('hidden');\n  } else {\n    loadMoreBtn.classList.remove('hidden');\n  }\n}\n\nfunction resetGallery() {\n  page = 1;\n  gallery.innerHTML = '';\n}\n\nfunction scrollByTwoItems() {\n  const itemHeight = gallery\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: itemHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["KEY","axios","config","fetchImages","query","page","gallery","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","emptyQuery","iziToast","noImagesFound","imagesFound","totalHits","lastPage","error","loaderElement","on","off","form","submitHandler","loadMoreBtn","loadMoreHandler","lightBox","SimpleLightbox","resetGallery","iziToast.emptyQuery","loader.on","iziToast.noImagesFound","loader.off","iziToast.imagesFound","imagesHandler","iziToast.error","scrollByTwoItems","totalPages","iziToast.lastPage","itemHeight"],"mappings":"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"}